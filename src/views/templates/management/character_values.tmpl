{% extends 'framework/base.tmpl' %}

{% block title%}Charakterdaten ändern{% endblock %}

{% block content%}
<!-- TODO: Divs als Tabelle darstellen -->
<!-- TODO: Form fest um das DIV herum und dann einfach nur noch füllen ? -->
{% for header in headers %}
    <div id="{{header.id}}" class="editable head_value">
        <div class="title">{{header.title}}</div>
        <div class="description">{{header.description}}</div>
        <div class="order">{{header.order}}</div>
        <div class="standard">{{header.standard}}</div>
    </div>
    
{% endfor %}


<script type="text/javascript">
    $('div.editable').on('click', function(event) {
        var req_item = this;
        $.post('aj_get_head', {'head_id': req_item.id}, function(data){
            var formular = '<form action="javascript:void(0)" class="input">\n' +
                '<input type="hidden" name="head_id" value="' + data.id + '" />\n' +                
                '<div class="title"><input name="title" type="text" value="' + data.title + '" /></div>\n' + 
                '<div class="description"><input name="description" type="text" value="' + data.description + '" /></div>\n' +
                '<div class="order"><input name="order" type="number" value="' + data.order + '" /></div>\n' + 
                '<div class="standard"><input name="standard" type="checkbox"' + (data.standard?' checked':'') + ' /></div>\n' +
                '<div class="actions"><input name="submit" type="submit" value="speichern" /></div>\n' +
                '</form>';
            $('div#' + data.id).off('click');
            $('div#' + data.id).html(formular);
        });
    });
    // TODO: SameSite-Probleme in der Java-Console zu sehen
</script>
{% endblock %}